{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\Shopping Kart\\\\client\\\\src\\\\components\\\\checkout\\\\Checkout.js\";\nimport React, { Component } from \"react\";\nimport Layout from \"../Layout\";\nimport Summary from \"./Summary\";\nimport { Container, Row, Col, ListGroup } from \"react-bootstrap\";\nimport CustomerInfo from \"./CustomerInfo\";\nimport Confirom from \"./Confirom\";\nimport axios from \"axios\";\nimport { Redirect } from \"react\";\nexport default class Checkout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = () => {\n      this.setState({\n        modalEdit: !this.state.modalEdit\n      });\n    };\n\n    this.onChangeFirstName = e => {\n      this.setState({\n        firstName: e.target.value\n      }, () => {\n        console.log(\"FirstName is\", this.state.firstName);\n      });\n    };\n\n    this.onChangeLastName = e => this.setState({\n      lastName: e.target.value\n    });\n\n    this.onChangeCountry = e => {\n      this.setState({\n        country: e.target.value\n      });\n    };\n\n    this.onChangeCity = e => this.setState({\n      city: e.target.value\n    });\n\n    this.onChangeProvince = e => this.setState({\n      province: e.target.value\n    });\n\n    this.onChangePostalCode = e => this.setState({\n      postalCode: Number(e.target.value)\n    });\n\n    this.onChangePhoneNumber = e => this.setState({\n      phoneNumber: Number(e.target.value)\n    });\n\n    this.onChangeAdress1 = e => this.setState({\n      address1: e.target.value\n    });\n\n    this.onChangeAdress2 = e => this.setState({\n      address2: e.target.value\n    });\n\n    this.onChangeShipppingMethod = shippingMethod => this.setState({\n      shippingMethod\n    }, () => {\n      console.log(\"shipping method\", shippingMethod);\n    });\n\n    this.onSubmit = () => {\n      const {\n        firstName,\n        lastName,\n        country,\n        city,\n        province,\n        postalCode,\n        phoneNumber,\n        address1,\n        address2,\n        totalDelivery,\n        cartItems,\n        totalPrice\n      } = this.state;\n      console.log(\"cartItem\", cartItems);\n      axios.post(\"http://localhost:4000/products/order\", {\n        customerInfo: {\n          firstName,\n          lastName,\n          country,\n          city,\n          province,\n          postalCode,\n          phoneNumber,\n          address1,\n          address2\n        },\n        customerOrder: cartItems.map(x => ({\n          itemTitle: x.title,\n          selectedSize: x.size,\n          selectedColor: x.color,\n          price: x.price,\n          quantity: x.quantity\n        })),\n        totalDelivery,\n        totalAmount: totalPrice + 100\n      }).then(res => {\n        console.log(res);\n      }).catch(error => {\n        console.log(error);\n      });\n      localStorage.removeItem(\"cartItem\");\n      alert(\"thanks for placing order\");\n      this.setState({\n        redirect: true\n      });\n    };\n\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      country: \"Pakistan\",\n      city: \"\",\n      province: \"\",\n      postalCode: 0,\n      phoneNumber: 0,\n      address1: \"\",\n      address2: \"\",\n      shippingMethod: 2,\n      totalDelivery: 1,\n      modalEdit: false,\n      cartItems: [],\n      totalPrice: \"\",\n      redirect: false\n    };\n  }\n\n  componentDidMount() {\n    let cartArray = [];\n    cartArray = JSON.parse(localStorage.getItem(\"cartItem\")) || [];\n    this.setState({\n      cartItems: cartArray\n    }, () => {\n      if (this.state.cartItems.length < 1) {\n        this.setState({\n          emptyMessage: \"Empty Cart\",\n          totalPrice: 0\n        });\n      }\n\n      if (this.state.cartItems.length !== 0) {\n        let price = this.state.cartItems[0].price;\n\n        if (this.state.cartItems.length !== 0) {\n          for (let i = 1; i < this.state.cartItems.length; i++) {\n            price = price + this.state.cartItems[i].price;\n          }\n\n          this.setState({\n            totalPrice: price\n          });\n        } else this.setState({\n          totalPrice: price\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      style: {\n        paddingTop: \"120px\",\n        paddingBottom: \"120px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        paddingBottom: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, \"Check out\"), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ListGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CustomerInfo, {\n      onChangeFirstName: this.onChangeFirstName,\n      onChangeLastName: this.onChangeLastName,\n      onChangeCountry: this.onChangeCountry,\n      onChangeCity: this.onChangeCity,\n      onChangeProvince: this.onChangeProvince,\n      onChangePostalCode: this.onChangePostalCode,\n      onChangePhoneNumber: this.onChangePhoneNumber,\n      onChangeAdress1: this.onChangeAdress1,\n      onChangeAdress2: this.onChangeAdress2,\n      onChangeShipppingMethod: this.onChangeShipppingMethod,\n      firstName: this.state.firstName,\n      lastName: this.state.lastName,\n      country: this.state.country,\n      city: this.state.city,\n      province: this.state.province,\n      postalCode: this.state.postalCode,\n      phoneNumber: this.state.phoneNumber,\n      address1: this.state.address1,\n      address2: this.state.address2,\n      shippingMethod: this.state.shippingMethod,\n      toggle: this.toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Confirom, {\n      firstName: this.state.firstName,\n      lastName: this.state.lastName,\n      country: this.state.country,\n      city: this.state.city,\n      province: this.state.province,\n      postalCode: this.state.postalCode,\n      phoneNumber: this.state.phoneNumber,\n      address1: this.state.address1,\n      address2: this.state.address2,\n      toggle: this.toggle,\n      modalEdit: this.state.modalEdit,\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(Col, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Summary, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/lenovo/Desktop/Shopping Kart/client/src/components/checkout/Checkout.js"],"names":["React","Component","Layout","Summary","Container","Row","Col","ListGroup","CustomerInfo","Confirom","axios","Redirect","Checkout","constructor","props","toggle","setState","modalEdit","state","onChangeFirstName","e","firstName","target","value","console","log","onChangeLastName","lastName","onChangeCountry","country","onChangeCity","city","onChangeProvince","province","onChangePostalCode","postalCode","Number","onChangePhoneNumber","phoneNumber","onChangeAdress1","address1","onChangeAdress2","address2","onChangeShipppingMethod","shippingMethod","onSubmit","totalDelivery","cartItems","totalPrice","post","customerInfo","customerOrder","map","x","itemTitle","title","selectedSize","size","selectedColor","color","price","quantity","totalAmount","then","res","catch","error","localStorage","removeItem","alert","redirect","componentDidMount","cartArray","JSON","parse","getItem","length","emptyMessage","i","render","paddingTop","paddingBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Layout from \"../Layout\";\r\nimport Summary from \"./Summary\";\r\nimport { Container, Row, Col, ListGroup } from \"react-bootstrap\";\r\nimport CustomerInfo from \"./CustomerInfo\";\r\nimport Confirom from \"./Confirom\";\r\nimport axios from \"axios\";\r\nimport {Redirect} from \"react\"\r\n\r\nexport default class Checkout extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      country: \"Pakistan\",\r\n      city: \"\",\r\n      province: \"\",\r\n      postalCode: 0,\r\n      phoneNumber: 0,\r\n      address1: \"\",\r\n      address2: \"\",\r\n      shippingMethod: 2,\r\n      totalDelivery: 1,\r\n      modalEdit: false,\r\n      cartItems: [],\r\n      totalPrice: \"\",\r\n      redirect: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    let cartArray = [];\r\n    cartArray = JSON.parse(localStorage.getItem(\"cartItem\")) || [];\r\n    this.setState({ cartItems: cartArray }, () => {\r\n      if (this.state.cartItems.length < 1) {\r\n        this.setState({ emptyMessage: \"Empty Cart\", totalPrice: 0 });\r\n      }\r\n      if (this.state.cartItems.length !== 0) {\r\n        let price = this.state.cartItems[0].price;\r\n        if (this.state.cartItems.length !== 0) {\r\n          for (let i = 1; i < this.state.cartItems.length; i++) {\r\n            price = price + this.state.cartItems[i].price;\r\n          }\r\n          this.setState({ totalPrice: price });\r\n        } else this.setState({ totalPrice: price });\r\n      }\r\n    });\r\n  }\r\n  toggle = () => {\r\n    this.setState({ modalEdit: !this.state.modalEdit });\r\n  };\r\n  onChangeFirstName = e => {\r\n    this.setState({ firstName: e.target.value }, () => {\r\n      console.log(\"FirstName is\", this.state.firstName);\r\n    });\r\n  };\r\n  onChangeLastName = e => this.setState({ lastName: e.target.value });\r\n  onChangeCountry = e => {\r\n    this.setState({ country: e.target.value });\r\n  };\r\n  onChangeCity = e => this.setState({ city: e.target.value });\r\n  onChangeProvince = e => this.setState({ province: e.target.value });\r\n  onChangePostalCode = e =>\r\n    this.setState({ postalCode: Number(e.target.value) });\r\n  onChangePhoneNumber = e =>\r\n    this.setState({ phoneNumber: Number(e.target.value) });\r\n  onChangeAdress1 = e => this.setState({ address1: e.target.value });\r\n  onChangeAdress2 = e => this.setState({ address2: e.target.value });\r\n  onChangeShipppingMethod = shippingMethod =>\r\n    this.setState({ shippingMethod }, () => {\r\n      console.log(\"shipping method\", shippingMethod);\r\n    });\r\n\r\n  onSubmit = () => {\r\n    const {\r\n      firstName,\r\n      lastName,\r\n      country,\r\n      city,\r\n      province,\r\n      postalCode,\r\n      phoneNumber,\r\n      address1,\r\n      address2,\r\n      totalDelivery,\r\n      cartItems,\r\n      totalPrice\r\n    } = this.state;\r\n    console.log(\"cartItem\", cartItems);\r\n\r\n    axios\r\n      .post(\"http://localhost:4000/products/order\", {\r\n        customerInfo: {\r\n          firstName,\r\n          lastName,\r\n          country,\r\n          city,\r\n          province,\r\n          postalCode,\r\n          phoneNumber,\r\n          address1,\r\n          address2\r\n        },\r\n        customerOrder: cartItems.map(x => ({\r\n          itemTitle: x.title,\r\n          selectedSize: x.size,\r\n          selectedColor: x.color,\r\n          price: x.price,\r\n          quantity: x.quantity\r\n        })),\r\n        totalDelivery,\r\n        totalAmount: totalPrice + 100\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n    localStorage.removeItem(\"cartItem\");\r\n    alert(\"thanks for placing order\");\r\n    this.setState({ redirect: true });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.redirect) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n    return (\r\n      <Layout>\r\n        <Container style={{ paddingTop: \"120px\", paddingBottom: \"120px\" }}>\r\n          <h1 style={{ paddingBottom: \"20px\" }}>Check out</h1>\r\n          <Row>\r\n            <Col md=\"8\">\r\n              <ListGroup>\r\n                <CustomerInfo\r\n                  onChangeFirstName={this.onChangeFirstName}\r\n                  onChangeLastName={this.onChangeLastName}\r\n                  onChangeCountry={this.onChangeCountry}\r\n                  onChangeCity={this.onChangeCity}\r\n                  onChangeProvince={this.onChangeProvince}\r\n                  onChangePostalCode={this.onChangePostalCode}\r\n                  onChangePhoneNumber={this.onChangePhoneNumber}\r\n                  onChangeAdress1={this.onChangeAdress1}\r\n                  onChangeAdress2={this.onChangeAdress2}\r\n                  onChangeShipppingMethod={this.onChangeShipppingMethod}\r\n                  firstName={this.state.firstName}\r\n                  lastName={this.state.lastName}\r\n                  country={this.state.country}\r\n                  city={this.state.city}\r\n                  province={this.state.province}\r\n                  postalCode={this.state.postalCode}\r\n                  phoneNumber={this.state.phoneNumber}\r\n                  address1={this.state.address1}\r\n                  address2={this.state.address2}\r\n                  shippingMethod={this.state.shippingMethod}\r\n                  toggle={this.toggle}\r\n                />\r\n                <Confirom\r\n                  firstName={this.state.firstName}\r\n                  lastName={this.state.lastName}\r\n                  country={this.state.country}\r\n                  city={this.state.city}\r\n                  province={this.state.province}\r\n                  postalCode={this.state.postalCode}\r\n                  phoneNumber={this.state.phoneNumber}\r\n                  address1={this.state.address1}\r\n                  address2={this.state.address2}\r\n                  toggle={this.toggle}\r\n                  modalEdit={this.state.modalEdit}\r\n                  onSubmit={this.onSubmit}\r\n                />\r\n              </ListGroup>\r\n            </Col>\r\n            <Col md=\"4\">\r\n              <Summary />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}